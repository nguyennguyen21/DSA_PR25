@page
@model DSA_PR25.Pages.Exam.AttemptModel
@{
    ViewData["Title"] = "Làm bài thi";
}

<h2>Làm bài thi</h2>

<form method="post">
    @for (int i = 0; i < Model.Questions.Count; i++)
    {
        var q = Model.Questions[i];
        <div class="card mb-3">
            <div class="card-body">
                <h5>Câu @($"{i + 1}")</h5>
                @if (!string.IsNullOrEmpty(q.Img))
                {
                    <img src="@q.Img" class="img-fluid mb-2" />
                }
                <p>@Html.Raw(q.Content)</p>

                @if (q.Type == "mcq")
                {
                    <input type="hidden" name="Answers[@i].QuestionId" value="@q.Id" />
                    <div>
                        @if (!string.IsNullOrEmpty(q.Options[0]))
                        {
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="Answers[@i].Response" value="A" id="q@(i)_A" />
                                <label class="form-check-label" for="q@(i)_A">A. @q.Options[0]</label>
                            </div>
                        }
                        @if (!string.IsNullOrEmpty(q.Options[1]))
                        {
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="Answers[@i].Response" value="B" id="q@(i)_B" />
                                <label class="form-check-label" for="q@(i)_B">B. @q.Options[1]</label>
                            </div>
                        }
                        @if (!string.IsNullOrEmpty(q.Options[2]))
                        {
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="Answers[@i].Response" value="C" id="q@(i)_C" />
                                <label class="form-check-label" for="q@(i)_C">C. @q.Options[2]</label>
                            </div>
                        }
                        @if (!string.IsNullOrEmpty(q.Options[3]))
                        {
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="Answers[@i].Response" value="D" id="q@(i)_D" />
                                <label class="form-check-label" for="q@(i)_D">D. @q.Options[3]</label>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <input type="hidden" name="Answers[@i].QuestionId" value="@q.Id" />
                    <input type="text" name="Answers[@i].Response" class="form-control" placeholder="Nhập đáp án..." />
                }
            </div>
        </div>
    }

    <button type="submit" class="btn btn-success">Nộp bài</button>
</form>